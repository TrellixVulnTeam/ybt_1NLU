ExtDockerImage('scratch', image='scratch')

ExtDockerImage('builder', image='golang', tag='1.14')

CustomInstaller(
  'protoc-gen-go',
  uri='',
  script='install-protoc-gen-go.sh',
)

DockerImage(
    'builder-with-proto',
    image_name='golang-with-proto',
    build_user='root',
    run_user='root',
    base_image=':builder',
    deps=[
        '//3rdparty:protobuf',
        ':protoc-gen-go',
    ],
)
